<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.rr_company.repository.DepartmentMyBatisRepo">

    <select id="FindAll" resultType="Department">
      SELECT <include refid="DepartmentColumns"></include>
      FROM crud.department d
    </select>
    
    <select id="FindById" resultType="Department">
        SELECT <include refid="DepartmentColumns"></include>
            FROM crud.department d
            <where>
                d.id = #{id}
            </where>
    </select>

    <insert id="insert">
        INSERT INTO department(name,
                               created_at,
                               updated_at)
        values(#{name, jdbcType=NVARCHAR},
               #{created_at},
               #{updated_at})
    </insert>

    <update id="update">
        UPDATE crud.department d
        SET d.name =#{name, jdbcType=NVARCHAR},
            d.created_at =#{created_at},
            d.updated_at = #{updated_at}
        <where>
            d.id=#{id}
        </where>

    </update>
    <delete id="delete">
        DELETE FROM crud.department d
        <where>
            d.id=#{id}
        </where>
    </delete>


    <sql id="DepartmentColumns">
            d.id,
            d.name,
            d.created_at,
            d.updated_at

    </sql>

</mapper>